# Clash é…ç½®æ¨¡æ¿XiaoMaoç‰ˆã€ä½œè€…ã€‘XiaoMao
# æœ€è¿‘æ›´æ–°æ—¶é—´ 20230310
# XiaoMao_Clash @1.0


# å°ç‰ˆæœ¬æ›´æ–°è¯·æŸ¥çœ‹æ›´æ–°æ—¥å¿— ï½œ æˆ–åŠ å…¥xiaomaoç»„ç»‡â¬‡ï¸
# å¾®ä¿¡å…¬ä¼—å· ã€å°å¸½é›†å›¢ã€‘
# XiaoMao Â· TGé€šçŸ¥é¢‘é“ï¼šhttps://t.me/xiaomaoJT
# XiaoMao Â· Tgè„šæœ¬é¢‘é“ï¼šhttps://t.me/XiaoMaoScript
# XiaoMao Â· GitHubä»“åº“ï¼šhttps://github.com/xiaomaoJT/QxScript

# â•â•â•â•XiaoMaoæç¤ºâ•â•â•â•
# é…ç½®å†…æ³¨é‡Šé¡¹åŠè½¯ä»¶å†…é»˜è®¤æœªå¼€å¯çš„è§„åˆ™å‡ä¸ºæœ‰æ•ˆé™„åŠ èƒ½åŠ›ï¼Œè¯·åŠ¡å¿…æ¸…æ¥šäº†è§£å…¶æ‰€é€ æˆçš„éšç§åŠå®‰å…¨é£é™©åæŒ‰éœ€å¯ç”¨

# å»ºè®®åœ¨æ›´æ–°IPæ•°æ®åº“é€‰é¡¹ä¸­å¡«å†™ä¸‹é¢é“¾æ¥
# https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country-only-cn-private.mmdb


# âš ï¸âš ï¸âš ï¸è¯·æ³¨æ„âš ï¸âš ï¸âš ï¸
# æœ¬æ¨¡æ¿ä¸ºæ ·ä¾‹æ¨¡ç‰ˆï¼Œè¿˜éœ€è‡ªè¡Œè¡¥å……å†…å®¹æ–¹å¯ç”Ÿæ•ˆã€‚
# ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶éœ€è¦ç‰¹æ®Šç¯å¢ƒä»¥æ‹‰å–è¿œç¨‹è§„åˆ™ã€‚

# æ‡’äººç‰ˆClashé…ç½®è§ä»¥ä¸‹é“¾æ¥
# https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/yaml/Clash_XiaoMao.yaml



# ä»£ç†ç«¯å£
mixed-port: 7890
# æ˜¯å¦å…è®¸å±€åŸŸç½‘ä»£ç†
allow-lan: true
bind-address: "*"
# è¿è¡Œæ¨¡å¼
mode: rule
# æ—¥å¿—ç±»å‹
log-level: info
# å¤–éƒ¨æ§åˆ¶
external-controller: "127.0.0.1:9090"
dns:
  enable: true
  listen: "127.0.0.1:53"
  # ipv6è¿æ¥
  ipv6: false
  default-nameserver: [223.5.5.5, 119.29.29.29]
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter:
    [
      +.lan,
      +.cn,
      +.10010.com,
      +.chinaunicom.com,
      "*.alipay.com",
      "*.alipayobjects.com",
      connect.rom.miui.com,
      localhost.ptlogin2.qq.com,
      "+.stun.*.*",
      "+.stun.*.*.*",
      "+.stun.*.*.*.*",
      "+.stun.*.*.*.*.*",
      "*.n.n.srv.nintendo.net",
      +.stun.playstation.net,
      "*.msftncsi.com",
      "*.msftconnecttest.com",
      ntp.ntsc.ac.cn,
    ]
  nameserver: ["https://doh.pub/dns-query", "https://dns.alidns.com/dns-query"]
  fallback: ["tls://8.8.4.4", "https://dns.twnic.tw/dns-query"]
  fallback-filter:
    { geoip: true, geoip-code: CN, ipcidr: [240.0.0.0/4, 0.0.0.0/32] }

#èŠ‚ç‚¹ç»„
proxies:
  # äºæ­¤å¤„æ·»åŠ èŠ‚ç‚¹é…ç½®ï¼Œä»¥ä¸‹ä¸ºæ¨¡æ¿ï¼Œéæ‰€æœ‰å­—æ®µå¿…å¡«ï¼Œä»¥æœºåœºè®¢é˜…ä¸ºä¸»ã€‚
  # è¡¥å……èŠ‚ç‚¹ä¿¡æ¯
  - {
      "name": "ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever",
      "type": "",
      "server": "",
      "port": "",
      "cipher": "",
      "uuid": "",
      "alterId": "",
      "tls": "",
      "network": "",
      "ws-opts": { "path": "", "headers": { "Host": "" } },
      "servername": "",
    }

# ç­–ç•¥ç»„
proxy-groups:
  # é™æ€ç­–ç•¥ - ç»¼åˆç­–ç•¥
  - {
      name: S.ç»¼åˆç­–ç•¥,
      type: select,
      proxies:
        [
          DIRECT,
          U.å…¨éƒ¨èŠ‚ç‚¹,
          U.é¦™æ¸¯èŠ‚ç‚¹,
          U.å°æ¹¾èŠ‚ç‚¹,
          U.æ—¥æœ¬èŠ‚ç‚¹,
          U.ç¾å›½èŠ‚ç‚¹,
          U.æ–°åŠ å¡èŠ‚ç‚¹,
          S.æ‰‹åŠ¨é€‰æ‹©,
          REJECT,
        ],
    }
  # é™æ€ç­–ç•¥ - GitæœåŠ¡
  - {
      name: S.GitæœåŠ¡,
      type: select,
      proxies:
        [
          U.é¦™æ¸¯èŠ‚ç‚¹,
          U.å°æ¹¾èŠ‚ç‚¹,
          DIRECT,
          S.ç»¼åˆç­–ç•¥,
          U.å…¨éƒ¨èŠ‚ç‚¹,
          U.æ—¥æœ¬èŠ‚ç‚¹,
          U.ç¾å›½èŠ‚ç‚¹,
          U.æ–°åŠ å¡èŠ‚ç‚¹,
          S.æ‰‹åŠ¨é€‰æ‹©,
          REJECT,
        ],
    }
  # é™æ€ç­–ç•¥ - è°·æ­ŒæœåŠ¡
  - {
      name: S.è°·æ­ŒæœåŠ¡,
      type: select,
      proxies:
        [
          U.é¦™æ¸¯èŠ‚ç‚¹,
          S.ç»¼åˆç­–ç•¥,
          U.å…¨éƒ¨èŠ‚ç‚¹,
          U.å°æ¹¾èŠ‚ç‚¹,
          U.æ—¥æœ¬èŠ‚ç‚¹,
          U.ç¾å›½èŠ‚ç‚¹,
          U.æ–°åŠ å¡èŠ‚ç‚¹,
          S.æ‰‹åŠ¨é€‰æ‹©,
          DIRECT,
          REJECT,
        ],
    }
  # é™æ€ç­–ç•¥ - å¾®è½¯æœåŠ¡
  - {
      name: S.å¾®è½¯æœåŠ¡,
      type: select,
      proxies:
        [
          DIRECT,
          S.ç»¼åˆç­–ç•¥,
          U.å…¨éƒ¨èŠ‚ç‚¹,
          U.é¦™æ¸¯èŠ‚ç‚¹,
          U.å°æ¹¾èŠ‚ç‚¹,
          U.æ—¥æœ¬èŠ‚ç‚¹,
          U.ç¾å›½èŠ‚ç‚¹,
          U.æ–°åŠ å¡èŠ‚ç‚¹,
          S.æ‰‹åŠ¨é€‰æ‹©,
          REJECT,
        ],
    }
  # é™æ€ç­–ç•¥ - è‹¹æœæœåŠ¡
  - {
      name: S.è‹¹æœæœåŠ¡,
      type: select,
      proxies:
        [
          DIRECT,
          S.ç»¼åˆç­–ç•¥,
          U.å…¨éƒ¨èŠ‚ç‚¹,
          U.é¦™æ¸¯èŠ‚ç‚¹,
          U.å°æ¹¾èŠ‚ç‚¹,
          U.æ—¥æœ¬èŠ‚ç‚¹,
          U.ç¾å›½èŠ‚ç‚¹,
          U.æ–°åŠ å¡èŠ‚ç‚¹,
          S.æ‰‹åŠ¨é€‰æ‹©,
          REJECT,
        ],
    }
  # é™æ€ç­–ç•¥ - æ‰‹åŠ¨é€‰æ‹© - éœ€æ‰‹åŠ¨é…ç½®è¡¥å…… âš ï¸ proxieså‚æ•°ä¸èƒ½ä¸ºç©º
  # æ­¤å¤„åœ¨proxiesè¡¥å……æ‰€éœ€çš„èŠ‚ç‚¹åç§°ï¼Œå¦‚ "ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"ï¼Œå³èŠ‚ç‚¹ç»„ä¸­çš„nameå±æ€§å€¼
  # å»ºè®®è¡¥å……æ‰€æœ‰èŠ‚ç‚¹æˆ–å¸¸ç”¨èŠ‚ç‚¹
  - { name: S.æ‰‹åŠ¨é€‰æ‹©, type: select, proxies: [DIRECT, REJECT] }
  # è‡ªåŠ¨ç­–ç•¥ - å…¨éƒ¨èŠ‚ç‚¹ - éœ€æ‰‹åŠ¨é…ç½®è¡¥å…… âš ï¸ proxieså‚æ•°ä¸èƒ½ä¸ºç©º
  # æ­¤å¤„åœ¨proxiesè¡¥å……æ‰€éœ€çš„èŠ‚ç‚¹åç§°ï¼Œå¦‚ "ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"ï¼Œå³èŠ‚ç‚¹ç»„ä¸­çš„nameå±æ€§å€¼
  # å»ºè®®è¡¥å……æ‰€æœ‰èŠ‚ç‚¹
  - {
      name: U.å…¨éƒ¨èŠ‚ç‚¹,
      type: url-test,
      proxies: ["ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"],
      url: "http://captive.apple.com/",
      interval: 216000,
    }
  # è‡ªåŠ¨ç­–ç•¥ - é¦™æ¸¯èŠ‚ç‚¹ - éœ€æ‰‹åŠ¨é…ç½®è¡¥å…… âš ï¸ proxieså‚æ•°ä¸èƒ½ä¸ºç©º
  # æ­¤å¤„åœ¨proxiesè¡¥å……æ‰€éœ€çš„èŠ‚ç‚¹åç§°ï¼Œå¦‚ "ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"ï¼Œå³èŠ‚ç‚¹ç»„ä¸­çš„nameå±æ€§å€¼
  # å»ºè®®è¡¥å……æ‰€æœ‰é¦™æ¸¯èŠ‚ç‚¹
  - {
      name: U.é¦™æ¸¯èŠ‚ç‚¹,
      type: url-test,
      proxies: ["ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"],
      url: "http://captive.apple.com/",
      interval: 216000,
    }
  # è‡ªåŠ¨ç­–ç•¥ - å°æ¹¾èŠ‚ç‚¹ - éœ€æ‰‹åŠ¨é…ç½®è¡¥å…… âš ï¸ proxieså‚æ•°ä¸èƒ½ä¸ºç©º
  # æ­¤å¤„åœ¨proxiesè¡¥å……æ‰€éœ€çš„èŠ‚ç‚¹åç§°ï¼Œå¦‚ "ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"ï¼Œå³èŠ‚ç‚¹ç»„ä¸­çš„nameå±æ€§å€¼
  # å»ºè®®è¡¥å……æ‰€æœ‰å°æ¹¾èŠ‚ç‚¹
  - {
      name: U.å°æ¹¾èŠ‚ç‚¹,
      type: url-test,
      proxies: ["ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"],
      url: "http://captive.apple.com/",
      interval: 216000,
    }
  # è‡ªåŠ¨ç­–ç•¥ - æ—¥æœ¬èŠ‚ç‚¹ - éœ€æ‰‹åŠ¨é…ç½®è¡¥å…… âš ï¸ proxieså‚æ•°ä¸èƒ½ä¸ºç©º
  # æ­¤å¤„åœ¨proxiesè¡¥å……æ‰€éœ€çš„èŠ‚ç‚¹åç§°ï¼Œå¦‚ "ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"ï¼Œå³èŠ‚ç‚¹ç»„ä¸­çš„nameå±æ€§å€¼
  # å»ºè®®è¡¥å……æ‰€æœ‰æ—¥æœ¬èŠ‚ç‚¹
  - {
      name: U.æ—¥æœ¬èŠ‚ç‚¹,
      type: url-test,
      proxies: ["ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"],
      url: "http://captive.apple.com/",
      interval: 216000,
    }
  # è‡ªåŠ¨ç­–ç•¥ - ç¾å›½èŠ‚ç‚¹ - éœ€æ‰‹åŠ¨é…ç½®è¡¥å…… âš ï¸ proxieså‚æ•°ä¸èƒ½ä¸ºç©º
  # æ­¤å¤„åœ¨proxiesè¡¥å……æ‰€éœ€çš„èŠ‚ç‚¹åç§°ï¼Œå¦‚ "ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"ï¼Œå³èŠ‚ç‚¹ç»„ä¸­çš„nameå±æ€§å€¼
  # å»ºè®®è¡¥å……æ‰€æœ‰ç¾å›½èŠ‚ç‚¹
  - {
      name: U.ç¾å›½èŠ‚ç‚¹,
      type: url-test,
      proxies: ["ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"],
      url: "http://captive.apple.com/",
      interval: 216000,
    }
  # è‡ªåŠ¨ç­–ç•¥ - æ—¥æœ¬èŠ‚ç‚¹ - éœ€æ‰‹åŠ¨é…ç½®è¡¥å…… âš ï¸ proxieså‚æ•°ä¸èƒ½ä¸ºç©º
  # æ­¤å¤„åœ¨proxiesè¡¥å……æ‰€éœ€çš„èŠ‚ç‚¹åç§°ï¼Œå¦‚ "ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"ï¼Œå³èŠ‚ç‚¹ç»„ä¸­çš„nameå±æ€§å€¼
  # å»ºè®®è¡¥å……æ‰€æœ‰æ—¥æœ¬èŠ‚ç‚¹
  - {
      name: U.æ–°åŠ å¡èŠ‚ç‚¹,
      type: url-test,
      proxies: ["ğŸ‡¦ğŸ‡¶â‚¬001â€¢ğŸŸXiaoMao-Forever"],
      url: "http://captive.apple.com/",
      interval: 216000,
    }

rule-providers:
  Microsoft:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml"
    path: ./ruleset/Microsoft.yaml
    interval: 216000
  Global:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global_Classical.yaml"
    path: ./ruleset/Global_Classical.yaml
    interval: 216000
  Streaming:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia_Classical.yaml"
    path: ./ruleset/GlobalMedia_Classical.yaml
    interval: 216000
  AdvertisingLite:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite_Classical.yaml"
    path: ./ruleset/AdvertisingLite_Classical.yaml
    interval: 216000
  GitHub:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml"
    path: ./ruleset/GitHub.yaml
    interval: 216000
  Google:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml"
    path: ./ruleset/Google.yaml
    interval: 216000
  Direct:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.yaml"
    path: ./ruleset/Direct.yaml
    interval: 216000
  Hijacking:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Hijacking/Hijacking.yaml"
    path: ./ruleset/Hijacking.yaml
    interval: 216000
  Privacy_Classical:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Privacy/Privacy_Classical.yaml"
    path: ./ruleset/Privacy_Classical.yaml
    interval: 216000
  Apple_Classical:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple_Classical.yaml"
    path: ./ruleset/Apple_Classical.yaml
    interval: 216000

rules:
  - "RULE-SET,Direct,DIRECT"
  - "RULE-SET,AdvertisingLite,REJECT"
  - "RULE-SET,Hijacking,REJECT"
  - "RULE-SET,Privacy_Classical,REJECT"
  - "RULE-SET,Apple_Classical,S.è‹¹æœæœåŠ¡"
  - "RULE-SET,GitHub,S.GitæœåŠ¡"
  - "RULE-SET,Microsoft,S.å¾®è½¯æœåŠ¡"
  - "RULE-SET,Google,S.è°·æ­ŒæœåŠ¡"
  - "RULE-SET,Global,S.ç»¼åˆç­–ç•¥"
  - "RULE-SET,Streaming,S.ç»¼åˆç­–ç•¥"
  - "GEOIP,CN,DIRECT"
  - "MATCH,S.ç»¼åˆç­–ç•¥"
